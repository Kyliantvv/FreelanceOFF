<nav class="navbar navbar-expand-md navbar-dark blue-gradient">
    <!-- Brand -->
    <a class="navbar-brand" href="{{ path('index_enterprise_presentation') }}">
        <img src="{{ asset('build/images/logoEnterprise.png') }}" height="30" alt="{{ 'menu.brandEnterprise'|trans }}">
    </a>

    <!-- Toggler/collapsibe Button -->
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
        <span class="navbar-toggler-icon"></span>
    </button>
    

    <!-- Navbar links -->
    <div class="collapse navbar-collapse" id="collapsibleNavbar">
        {% set from_user_admin = false %}
        {% for role in app.user.getRoles() %}
            {% if role == 'ROLE_ADMIN' %}{% set from_user_admin = true %}{% endif %}
            {% if role == 'ROLE_SUPER_ADMIN' %}{% set from_user_admin = true %}{% endif %}
        {% endfor %}
        {% if from_user_admin == true %}
            <form class="form-inline ml-auto" action="{{ path('userSearch') }}" method="get">
                <div class="md-form my-0">
                    <input class="form-control mx-0" type="text" placeholder="{{ 'menu.search'|trans }}" aria-label="{{ 'menu.search'|trans }}" name="query" id="query" {% if query is defined and query is not empty %}value="{{ query }}"{% endif %}>
                </div>
                <div class="md-form my-0 mr-2">
                    <select class="mdb-select md-form my-1" name="query-section" id="query-section">
                        <option value="1"{% if querySection is defined and querySection == "1" %} selected{% endif %}>{{ 'menu.searchCombo.1'|trans }}</option>
                        <option value="2"{% if querySection is defined and querySection == "2" %} selected{% endif %}>{{ 'menu.searchCombo.2'|trans }}</option>
                    </select>
                </div>
                <button href="#!" class="btn-floating btn-sm btn-outline-white btn-md my-0 ml-sm-2 ml-2" type="submit"><i class="fas fa-search"></i></button>
            </form>
        {% endif %}

        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
            </li>
        </ul>

        {% if app.user.avatar is empty %}
            <ul class="navbar-nav navbar-right">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="user-dropdown" data-toggle="dropdown" role="button" aria-expanded="false">
                        <i class="fal fa-user fa-2x mr-2"></i>{{ app.user.firstName }} {{ app.user.lastName }}<span class="caret"></span>
                    </a>
        {% else %}
            <ul class="navbar-nav navbar-right nav-flex-icons">
                <li class="nav-item avatar dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink-55" data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">
                        <img src="{{ app.user.avatarContent }}" class="rounded-circle z-depth-0"
                             alt="{{ app.user.identity }}">
                    </a>
        {% endif %}
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="user-dropdown">
                        <a class="dropdown-item" href="{{ path('index_presentation') }}"><span class="fal fa-tachometer mr-1"></span><span>{{ 'menu.items.dashboard'|trans }}</span></a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="{{ path('show_profile') }}"><span class="fal fa-cog fa-spin mr-1"></span><span>{{ 'menu.items.accountManager'|trans }}</span></a>
                        {% if app.user.enterprise is not null %}
                        <a class="dropdown-item" href="{{ path('enterprise-form-edit', {'enterprise' : app.user.enterprise.id}) }}"><span class="fal fa-building mr-1"></span><span>{{ 'menu.items.accountEnterprise'|trans }}</span></a>
                        {% endif %}
                        {% if from_user_admin == true %}
                        <a href="{{ path('sonata_admin_dashboard') }}" class="dropdown-item">
                            <span class="fal fa-cogs mr-1"></span><span>{{ 'menu.items.admin'|trans }}</span>
                        </a>
                        {% endif %}
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="{{ path('legal_notice') }}"><span class="fal fa-file-alt mr-1"></span><span>{{ 'menu.items.cgu'|trans }}</span></a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="{{ path('app_logout') }}"><span class="fal fa-sign-out mr-1"></span><span>{{ 'menu.items.disconnect'|trans }}</span></a>
                    </div>
                </li>
            </ul>
    </div>
</nav>
